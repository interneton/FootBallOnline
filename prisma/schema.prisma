// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "postgresql" // 사용하는 DB에 맞게 설정 (mysql, sqlite 등)
  url      = env("DATABASE_URL")
}
model User {
  userId      Int          @id @default(autoincrement())
  cashId      Int
  account     String
  password    String
  name        String
  cashAmount  Int          @default(1000) // 기본 캐시 설정
  teamName    String
  userPlayers UserPlayer[]
  matches     MatchManager[]
}
model MatchManager {
  id          Int      @id @default(autoincrement())
  winCount    Int      @default(0)  // 승리 카운트
  lossCount   Int      @default(0)  // 패배 카운트
  drawCount   Int      @default(0)  // 무승부 카운트
  userId      Int
  user        User     @relation(fields: [userId], references: [userId])
}
model UserPlayer {
  userPlayerId  Int           @id @default(autoincrement())
  userId        Int
  soccerPlayer  Int
  isEquipped    Boolean       @default(false)
  user          User          @relation(fields: [userId], references: [userId])
  soccerPlayer  SoccerPlayer  @relation(fields: [soccerPlayer], references: [soccerPlayerId])
}
model SoccerPlayer {
  soccerPlayerId Int           @id @default(autoincrement())
  name           String
  rank           String        // 선수의 랭크
  speed          Int
  goalDecision   Int
  shootPower     Int
  defense        Int
  stamina        Int
  packs          PackPlayer[]
}
model Pack {
  id             Int           @id @default(autoincrement())
  name           String
  price          Int
  players        PackPlayer[]
}
model PackPlayer {
  id             Int           @id @default(autoincrement())
  packId         Int
  soccerPlayerId Int
  probability    Float         // 확률
  pack           Pack          @relation(fields: [packId], references: [id])
  soccerPlayer   SoccerPlayer  @relation(fields: [soccerPlayerId], references: [soccerPlayerId])
}
